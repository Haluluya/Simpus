<!--
Do not edit this file unless you are updating guidance for AI assist tools.
This file is consumed by local tooling (Laravel Boost) and should be concise.
-->

# Copilot / AI agent instructions — SIMPUS

Be brief and actionable. Focus on discoverable project conventions, commands, and examples the agent can use immediately.

- Project type: Laravel 12 application (PHP 8.2). Key entry points: `composer.json`, `package.json`, `bootstrap/app.php`, `bootstrap/providers.php`.
- Primary folders: `app/` (models, controllers, jobs, services), `routes/` (see `routes/web.php` and `routes/auth.php`), `database/factories`, `resources/` (views/css/js), `postman/`.

Quick commands (assume project root, Windows may require full php path):

```text
cp .env.example .env
composer install
npm install
php artisan key:generate
php artisan migrate --seed
npm run dev   # or `npm run build` for production assets
php artisan serve
php artisan queue:work --queue=default,satusehat
php artisan test
vendor/bin/pint --dirty
```

Important environment vars used by integrations:
- BPJS_CONS_ID, BPJS_SECRET, BPJS_USER_KEY (BPJS integration in `app/Services/Bpjs`)
- SATUSEHAT_CLIENT_ID, SATUSEHAT_CLIENT_SECRET, SATUSEHAT_BASE_URL, SATUSEHAT_AUTH_URL (SatuSehat in `app/Services/SatuSehat`, jobs in `app/Jobs` and `app/Jobs/SyncToSatuSehat.php`)
- AI_BASE_URL (optional local AI endpoint used by services under `app/Services/Ai`)

Conventions and patterns (do not invent new styles):
- Use Eloquent and Model::query() over raw DB; prefer eager-loading to avoid N+1 (see `app/Models/Visit.php`, `app/Models/Patient.php`).
- Validation via Form Requests (`app/Http/Requests/`). Follow existing request patterns.
- Create classes using artisan make commands and pass `--no-interaction` when scripting.
- Factories live in `database/factories` — use them in tests. Example factories: `VisitFactory.php`, `UserFactory.php`.
- Exports use `app/Exports` (example: `VisitsExport.php`).

Laravel-12 specifics found in repo:
- Middleware and console registration happens in `bootstrap/app.php` / `bootstrap/providers.php` (check these instead of altering Kernel files).
- Commands under `app/Console/Commands/` auto-register.

Testing and formatting:
- Run focused tests with `php artisan test --filter=YourTestName` or file path.
- Use existing factories and helper methods; tests are PHPUnit-based (`phpunit` v11).
- Format with `vendor/bin/pint --dirty` before committing.

Where to look for examples:
- Integration jobs & services: `app/Jobs/`, `app/Services/` (Ai, Bpjs, Fhir, SatuSehat)
- Models & casts: `app/Models/` (e.g. `Visit.php`, `User.php`)
- Routes & auth: `routes/web.php`, `routes/auth.php`
- Postman collection: `postman/SIMPUS.postman_collection.json` for representative API requests.

If uncertain: prefer inspecting sibling files for how similar functionality is implemented. Avoid creating new top-level directories.

Notes for agent authors:
- This repository uses Laravel Boost tooling that expects this file at `.github/copilot-instructions.md`.
- Cite concrete files when proposing changes (e.g., "Follow pattern used in `app/Services/SatuSehat/SyncToSatuSehat.php`").

If this guidance is unclear or you need more examples, request specific areas (routes, services, tests) to expand.
